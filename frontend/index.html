<html>
  <head>
    <title>S3 POST Form</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>

  <body>
    <select id="formType">
      <option value="" selected>Select one...</option>
      <option value="consent-form">Consent Form</option>
      <option value="laboratory-form">Laboratory Form</option>
      <option value="requisition-form">Requisition Form</option>
    </select>
    <form action="https://hap-billing-documents.s3.amazonaws.com" method="post" enctype="multipart/form-data" onsubmit="return false">
      <input type="hidden" name="Content-Type" value="multipart/form-data">
      <input type="hidden" name="AWSAccessKeyId" value="AKIA2RK7L5BGDKT36YRA">
      <input type="hidden" name="acl" value="public-read">
      <input type="hidden" name="success_action_status" value="201">
      <input type="hidden" name="policy" value="eyJleHBpcmF0aW9uIjoiMjAyMC0wMi0yNlQwMDowMTo1Ni43NjNaIiwiY29uZGl0aW9ucyI6W1sic3RhcnRzLXdpdGgiLCIka2V5IiwiIl0seyJidWNrZXQiOiJoYXAtYmlsbGluZy1kb2N1bWVudHMifSx7ImFjbCI6InB1YmxpYy1yZWFkIn0sWyJzdGFydHMtd2l0aCIsIiRDb250ZW50LVR5cGUiLCJtdWx0aXBhcnQvZm9ybS1kYXRhIl0seyJzdWNjZXNzX2FjdGlvbl9zdGF0dXMiOiIyMDEifV19">
      <input type="hidden" name="signature" value="WD3vNkReFaGdQ4bWyz1gkBJ2WX4=">

      Destination filename: <input type="text" name="key" id="key" value="upload.pdf">
      <br>
      File to upload to S3:
      <input name="file" type="file" id="file" onchange="updateKey()">
      <br>
      <input type="submit" value="Upload File to S3">
    </form>
    <script>
      function updateKey() {
        var filepath = document.getElementById('file').value;
        var number = filepath.lastIndexOf("\\");
        console.log(number);
        var filename = filepath.substring(number+1);
        console.log(filename);
        var formType = document.getElementById('formType');
        document.getElementById('key').value = formType.value + "-" + filename;
        // console.log(document.getElementById('file'));
      }
    </script>
  </body>
</html>
